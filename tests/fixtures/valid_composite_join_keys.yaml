name: COMPOSITE_JOIN_KEYS
description: Test semantic model with composite join keys in relationships
tables:
  - name: ORDER_ITEMS
    base_table:
      database: SALES_DB
      schema: PUBLIC
      table: ORDER_ITEMS
    dimensions:
      - name: ORDER_ID
        expr: ORDER_ID
        data_type: VARCHAR
      - name: LINE_NUMBER
        expr: LINE_NUMBER
        data_type: INTEGER
      - name: PRODUCT_ID
        expr: PRODUCT_ID
        data_type: VARCHAR
      - name: WAREHOUSE_ID
        expr: WAREHOUSE_ID
        data_type: VARCHAR
    facts:
      - name: QUANTITY
        expr: QUANTITY
        data_type: INTEGER
        aggregation: sum
  - name: INVENTORY
    base_table:
      database: SALES_DB
      schema: PUBLIC
      table: INVENTORY
    dimensions:
      - name: PRODUCT_ID
        expr: PRODUCT_ID
        data_type: VARCHAR
      - name: WAREHOUSE_ID
        expr: WAREHOUSE_ID
        data_type: VARCHAR
      - name: LOCATION
        expr: LOCATION
        data_type: VARCHAR
    facts:
      - name: STOCK_LEVEL
        expr: STOCK_LEVEL
        data_type: INTEGER
        aggregation: sum
relationships:
  - name: order_items_to_inventory
    left_table: ORDER_ITEMS
    right_table: INVENTORY
    relationship_columns:
      - left_column: PRODUCT_ID
        right_column: PRODUCT_ID
      - left_column: WAREHOUSE_ID
        right_column: WAREHOUSE_ID
    join_type: left_outer
    relationship_type: many_to_one
